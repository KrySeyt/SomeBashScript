# UsersAndGroupsControl
## Задача, которую решает этот скрипт:
Разработать скрипт, предоставляющий пользователю интерфейс для создания, удаления, получения и модификации информации о пользователях и группах.\
\
Во всех вариантах должен быть разработан скрипт для интерпретатора команд Bourne Shell (/bin/sh), Bourne Again Shell (bash) или для любого sh совместимого интерпретатора. Разработка скриптов для других интерпретаторов допускается только после предварительного согласования с преподавателем. Скрипт должен запускаться указанием абсолютного или относительного имени скрипта, без указания интерпретатора команд при запуске. Скрипт должен сохранять работоспособность и свой функционал  при переименовании и/или перемещении его в другой каталог (без внесения изменений в исходный код файла скрипта). Все временные файлы, в том числе файл отчёта, должны создаваться в том же каталоге, где расположен скрипт. В случае невозможности создания файлов в этом каталоге, то для всех этих файлов необходимо использовать каталог /tmp или /var/tmp.\ 
\
Скрипт должен выполнять функции согласно варианту задания. Кроме того, скрипт обязательно должен содержать меню и предоставлять пользователю возможность повторного выбора пунктов меню без повторного запуска скрипта (для выбора пунктов меню можно использовать цифры или буквы). Любой некорректный ввод пользователя, в том числе ввод пустых строк, должен корректно обрабатываться при выборе пунктов меню и в процессе работы самого скрипта. При любых ошибках при выполнении команд, используемых для выполнения основного задания, необходимо выводить код ошибки, возвращенный командой.\
\
При каждом запуске скрипт должен с помощью команды mktemp создавать уникальный временный файл, в имени которого должны присутствовать инициалы разработчика. В файл должна быть помещена следующая информация: имя файла скрипта, PID текущего процесса и время запуска в формате DD-MM-YYYY hh:mm:ss (GMT), где  GMT временная зона.\ 
\
Скрипт также должен обрабатывать попытку прерывания своего выполнения пользователем с помощью комбинации CTRL-C, и выдавать запрос, действительно ли необходимо завершить выполнение скрипта. При отрицательном ответе работа скрипта должна быть продолжена с места его прерывания. При положительном ответе скрипт должен завершаться с кодом возврата 1. При любом корректном завершении скрипта, в том числе при получении сигналов SIGQUIT и SIGTERM, скрипт должен выдавать соответствующее сообщение и удалять созданный при запуске временный файл. В данном случае скрипт должен завершаться с кодом возврата 0. Дополнительно при получении сигнала SIGUSR1 должно выводиться время запуска скрипта, общее время выполнения  скрипта и процессорное время выполнения скрипта. Все эти значения должны быть получены с помощью соответствующих ключевых слов команды ps, для текущего процесса скрипта. При получении сигнала SIGUSR2 должен выводиться список файлов, открытых скриптом (для этого можно использовать команды fstat или lsof).\ 
\
Кроме того, скрипт должен обрабатывать ключи –d –v –s –k –h, которые могут быть указаны при запуске скрипта. Необходимо учесть, что при запуске может быть указан любой набор ключей в любом порядке (в том числе может быть не указано ни одного ключа). При обработке ключей в скрипте необходимо применять их действия в порядке: –d, –v, –s, –k,  –h.\  
\
При присутствии ключа –d вся информация, выводимая в стандартный поток вывода и стандартный поток ошибок должна дублироваться в файле отчета с именем script_FIO.out, где FIO инициалы разработчика (это можно реализовать с помощью перенаправления потоков ввода/вывода с помощью команд exec и tee). При запуске в данном режиме скрипт должен запросить у пользователя режим работы с файлом script_FIO.out: удалить предыдущий файл script_FIO.out или продолжить запись в существующий файл в случае его наличия. В начале работы в данном режиме на экран должно выводиться время запуска скрипта. При любом корректном завершении скрипта должно выводиться время завершения работы скрипта.\
\
При присутствии ключа –v каждая строка скрипта должна выводиться в стандартный поток вывода, а также должны выводиться все команды и их аргументы перед выполнением команд (это можно реализовать с помощью установки специальных режимов команды set).\ 
\
При присутствии ключа –s необходимо проверить запущены ли в данный момент другие экземпляры скрипта. В случае если запущен еще хотя бы один экземпляр скрипта, то текущий скрипт должен выдать на экран соответствующее сообщение, указав количество запущенных экземпляров, и завершиться с кодом возврата 3.\
\
При присутствии ключа –k необходимо вывести список всех запущенных экземпляров скрипта с указанием следующих атрибутов: PID и PPID процесса, UID и GID пользователя, терминал,  время запуска скрипта и командная строка запуска. Кроме того, отдельно должен быть указан текущий экземпляр скрипта. Также в этом режиме скрипт должен выдавать запрос пользователю желает ли он завершить все экземпляры запущенных скриптов. При отрицательном ответе скрипт должен продолжить дальнейшую работу в обычном режиме. В случае положительного ответа скрипт должен запросить у пользователя, какой сигнал (SIGTERM или SIGKILL) необходимо использовать для завершения всех запущенных экземпляров скрипта.\ 
\
При присутствии ключа –h скрипт должен выводить информацию о разработчике, назначению и параметрах запуска скрипта. Также скрипт должен выводить следующую информацию: текущие дату и время, имя созданного временного файла, имя системы, имя текущего терминала. Кроме того, необходимо выводить идентификаторы (RUID, EUID) пользователя, который запустил скрипт и имена пользователей, соответствующие этим идентификаторам. Выводить идентификаторы (RGID, EGID) групп, от имени которых запущен скрипт, и имена групп, соответствующие этим идентификаторам (это можно реализовать с помощью команды id). Если скрипт запущен суперпользователем и/или членом группы «администраторы» (GID=0), он должен выводить соответствующее предупреждение. Также скрипт должен выводить дополнительную информацию: PID текущего процесса, имя файла скрипта, относительный или абсолютный путь, использованный при запуске скрипта, командную строку, используемую при запуске скрипта (с помощью соответствующего ключевого слова команды ps), а также размер, права доступа, время последней модификации, владельца-пользователя и владельца-группу файла скрипта (с помощью команды stat). Вся перечисленная выше информация должна выводиться построчно в формате описание/наименование: значение. После вывода всей информации, скрипт должен выдать приглашение пользователю, для выбора режима: продолжить дальнейшую работу в обычном режиме или завершить работу скрипта. Если был выбран режим завершения работы скрипта, то он должен завершаться с кодом возврата 2.
